"0","# Ask user for credentials "
"0","if (requireNamespace(""rstudioapi"", quietly = TRUE) && rstudioapi::isAvailable()) {"
"0","  username <- rstudioapi::askForPassword(""Enter your DHIS Username:"")"
"0","  password <- rstudioapi::askForPassword(""Enter your DHIS Password:"")"
"0","  "
"0","  cat(""user credentials collected.\n"")"
"0","} else {"
"0","  stop(""his script requires RStudio to securely input credentials."")"
"0","}"
"1","user credentials collected.
"
"0"," "
"0",""
"0",""
"0","userpwd <- paste(username, password, sep = "":"") "
"0",""
"0"," "
"0",""
"0","# Send GET request with basic authentication"
"0","response <- GET(url, authenticate(username, password))"
"0","status_code(response) "
"1","[1]"
"1"," 200"
"1","
"
"0","# Check and report the result status_code"
"0","if (status_code(response) == 200) {"
"0","  cat(""login successful. DHIS2 data request succeeded.\n"")"
"0","} else if (status_code(response) == 401) {"
"0","  "
"0","  print(""login failed. Unauthorized "")"
"0","  # print(""login failed. Unauthorized "") "
"0","  "
"0","    showDialog(""Login Error"", ""login failed. Unauthorized. Please check your username and password."")"
"0","  stop(""Stopped due to failed login."")"
"0","  "
"0","  stop(""login failed. Unauthorized (401). Please check your username and password.\n"")"
"0","} else {"
"0","  stop(""Request failed. Status code:"", status_code(response), ""\n"")"
"0","}"
"1","login successful. DHIS2 data request succeeded.
"
